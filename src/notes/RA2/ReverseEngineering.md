---
category:
  - 逆向工程
  - RA2
tag:
  - 地图编辑
  - Syringe
  - 进程注入
---

# 基于 FA2sp 的逆向小记

## 背景

FA2sp 是为了改善红警 2 地图编辑器 FinalAlert2（下面简称 FA2）的使用体验而开发的扩展库。它通过 Syringe 注入 Hook 的方式，无需修改 FA2 本体便能享受到扩展的功能和修复。

2024年3月8日，EA 在发布 Steam 版红警 2 时，终于把 FA2 的源码放了出来，自此 FA2sp 完成了历史使命。
然鹅，FA2sp 的主要开发者 [@secsome](https://github.com/secsome) 虽然承诺把扩展功能和 bug 修复移植到官方源码中，但由于三次元原因该计划迟迟未能推进。
考虑到「星辰之光」这边仍有对 FA2 的扩展需求，我便当起了接盘侠，继续 [FA2sp](https://github.com/ClLab-YR/FA2sp) 的维护。

那既然接了盘，总该干点事不是。于是才疏学浅的我结合自己备考 408 的粗略理解，尝试研究书伸（secsome）留下来的逆向成果——`finalalert2yr.exe.idb`。

## 复习一下寄组

> [!note]
> 我事非科班生（准确的说，我是会计学专业的），对汇编的认识仅限考研 408 计算机组成原理对「指令系统」的考察。  
> 考虑到其中介绍的基本运算指令在分析 FA2 中意义并不大，因此本章着重掰扯「程序执行流」。
